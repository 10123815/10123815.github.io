---
layout:     post
title:      "裁剪"
date:       2017-03-27
author:     "ysd"
header-img: "img/post-bg-2015.jpg"
tags:
        - 图形学
---

### Sutherland-Hodgman 算法

Sutherland-Hodgman算法逐平面对多边形进行剪裁。<br/>
对于每个剪裁面来说，输入多边形顶点序列，_v1-v2-v3-...-v1_，
对每条边剪裁，输出新的顶点序列 _q1-q2-q2-...._ <br/>
当使用一个平面对一条线段剪裁时，可能有4种情况：
1. v1，v2都在平面内侧，输出v1
2. v1在平面内侧，v2在平面外侧，输出v1和交点
3. v1，v2都在平面外侧，跳过
4. v1在平面外侧，v2在平面内侧，输出交点
输出后，继续考察下一条边

#### 求平面和直线的交点
已知平面上一点p和法向量n，已知直线上一点a和方向v<br/>
则交点为：```(ax + t * vx, az + t * vz, az + t * vz)```<br/>
其中，```t = dot(p - a, n) / dot(n, v)```

#### 属性差值
每当得到新的点（上面第2,4种情况），则需要对新的点的属性差值。<br/>
由于此时位于投影空间，仍然需要对
_1/z_ 差值，其中
_z_ 是相机空间的


